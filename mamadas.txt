bro actual mente en mi codigo lo estoy manejando asi:

using Microsoft.EntityFrameworkCore;

using webProducts.Domain.Entities;



namespace webProducts.Infrastructure.Data;



public class AppDbContext :  DbContext

{

    public AppDbContext(DbContextOptions<AppDbContext> opts) : base(opts) { }



    public DbSet<User> Users => Set<User>();

    public DbSet<Product> Products => Set<Product>();

    public DbSet<CartItem> CartItems => Set<CartItem>();

    public DbSet<Order> Orders => Set<Order>();

    public DbSet<OrderItem> OrderItems => Set<OrderItem>();



    protected override void OnModelCreating(ModelBuilder modelBuilder)

    {

        modelBuilder.Entity<User>().HasIndex(u => u.Email).IsUnique();

        modelBuilder.Entity<User>().HasIndex(u => u.UserName).IsUnique();

        modelBuilder.Entity<Product>().Property(p => p.Price).HasColumnType("decimal(18,2)");

        modelBuilder.Entity<Order>().Property(o => o.Total).HasColumnType("decimal(18,2)");

        modelBuilder.Entity<OrderItem>().Property(oi => oi.UnitPrice).HasColumnType("decimal(18,2)");

        modelBuilder.Entity<OrderItem>().Property(oi => oi.DiscountApplied).HasColumnType("decimal(18,2)");

        base.OnModelCreating(modelBuilder);

    }

}

using Microsoft.EntityFrameworkCore;

using Microsoft.Extensions.Configuration;

using Microsoft.Extensions.DependencyInjection;

using webProducts.Domain.Interfaces;

using webProducts.Infrastructure.Data;

using webProducts.Infrastructure.Repositories;



namespace webProducts.Infrastructure.Extensions;



public static class ServiceCollectionExtensions

{

    public static IServiceCollection AddInfrastructure(this IServiceCollection services, IConfiguration configuration)

    {

        var conn = configuration.GetConnectionString("DefaultConnection") ?? "Server=localhost;Database=productsdb;Uid=root;Pwd=root;";

        services.AddDbContext<AppDbContext>(opt => opt.UseMySql(conn, ServerVersion.AutoDetect(conn)));

        // Repositorios concretos

        services.AddScoped<IUserRepository, UserRepository>();

        services.AddScoped<IProductRepository, ProductRepository>();

        services.AddScoped<ICartRepository, CartRepository>();

        services.AddScoped<IOrderRepository, OrderRepository>();

        return services;

    }

}

namespace webProducts.Domain.Entities;



public class User

{

    public int Id { get; set; }

    public string UserName { get; set; } = string.Empty;

    public string Email { get; set; } = string.Empty;

    public string Password { get; set; } = string.Empty; // hashed

    public Role Role { get; set; } = Role.User;

    // Relations

    public ICollection<CartItem> CartItems { get; set; } = new List<CartItem>();

    public ICollection<Order> Orders { get; set; } = new List<Order>();

}

namespace webProducts.Domain.Entities;



public class Product

{

    public int Id { get; set; }

    public string Name { get; set; } = string.Empty;

    public string Description { get; set; } = string.Empty;

    public decimal Price { get; set; }

    public int Stock { get; set; } // cantidad disponible

}

namespace webProducts.Domain.Entities;



public enum Role { User, Admin }

namespace webProducts.Domain.Entities;



public class OrderItem

{

    public int Id { get; set; }

    public int OrderId { get; set; }

    public Order? Order { get; set; }

    public int ProductId { get; set; }

    public Product? Product { get; set; }

    public int Quantity { get; set; }

    public decimal UnitPrice { get; set; } // price at purchase time

    public decimal DiscountApplied { get; set; } // absolute amount

}

namespace webProducts.Domain.Entities;



public class Order

{

    public int Id { get; set; }

    public int UserId { get; set; }

    public User? User { get; set; }

    public DateTime CreatedAt { get; set; } = DateTime.UtcNow;

    public decimal Total { get; set; }

    public ICollection<OrderItem> Items { get; set; } = new List<OrderItem>();

}

namespace webProducts.Domain.Entities;



public class CartItem

{

    public int Id { get; set; }

    public int UserId { get; set; }

    public User? User { get; set; }

    public int ProductId { get; set; }

    public Product? Product { get; set; }

    public int Quantity { get; set; }

}

teniendo esto en cuenta dime que debo de poner y en donde.



ten en cuenta que en mi capa de Infrasgtructure solo tengo Data/, Extensions/, Repositories/.



las migraciones fueron hechas directa mente con el comando dotnet ef migrations add.



tambien te comparti mis entidades para la creacion de la base de datos en render.



